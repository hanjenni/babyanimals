(this["webpackJsonpjwt-boilerplate"]=this["webpackJsonpjwt-boilerplate"]||[]).push([[0],{137:function(e,t,n){},138:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(48),a=n.n(r),s=(n(136),n(137),n(22)),i=n(8),c=(n(138),n(77)),l=n(75),u=n(7);var j=n(164),h=n(165),d=n(119),g=n(160),p=n(166),b=n(162),O=n(161);function m(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var f={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:m,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=m();return e?JSON.parse(atob(e.split(".")[1])).user:null}},x="/api/users/";var w={signup:function(e){return fetch(x+"signup",{method:"POST",body:e}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))})).then((function(e){var t=e.token;return f.setToken(t)}))},logout:function(){f.removeToken()},login:function(e){return fetch(x+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))})).then((function(e){var t=e.token;return f.setToken(t)}))},getUser:function(){return f.getUserFromToken()}};function v(e){var t=Object(o.useState)({message:"",passwordError:!1}),n=Object(s.a)(t,2),r=(n[0],n[1],Object(o.useState)({username:"",email:"",password:"",passwordConf:""})),a=Object(s.a)(r,2),i=a[0],m=a[1],f=Object(o.useState)(""),x=Object(s.a)(f,2),v=x[0],k=x[1];function S(e){m(Object(l.a)(Object(l.a)({},i),{},Object(c.a)({},e.target.name,e.target.value)))}return Object(u.jsx)(j.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(u.jsxs)(j.a.Column,{style:{maxWidth:450},children:[Object(u.jsxs)(h.a,{as:"h2",color:"yellow",textAlign:"center",children:[Object(u.jsx)(d.a,{src:"/logo.png"})," Sign Up"]}),Object(u.jsx)(g.a,{onSubmit:function(e){e.preventDefault();var t=new FormData;for(var n in t.append("photo",v),i)t.append(n,i[n]);w.signup(Object(l.a)(Object(l.a)({},i),{},{selectedFile:v}))},size:"large",autoComplete:"on",children:Object(u.jsxs)(p.a,{stacked:!0,children:[Object(u.jsx)(g.a.Input,{name:"username",value:i.username,iconPosition:"left",placeholder:"username",fluid:!0,icon:"user",onChange:S,required:!0}),Object(u.jsx)(g.a.Input,{name:"email",type:"email",value:i.email,iconPosition:"left",placeholder:"email",fluid:!0,icon:"lock",onChange:S,required:!0}),Object(u.jsx)(g.a.Input,{name:"password",type:"password",value:i.password,iconPosition:"left",placeholder:"Password",onChange:S,required:!0}),Object(u.jsx)(g.a.Input,{name:"passwordConf",type:"password",iconPosition:"left",placeholder:"Confirm Password",value:i.passwordConf,onChange:S,required:!0}),Object(u.jsx)(g.a.Field,{children:Object(u.jsx)(g.a.Input,{type:"file",name:"photo",placeholder:"upload image",onChange:function(e){console.log(e.target.files,"<-this is e.target.files"),k(e.target.files[0])}})}),Object(u.jsx)(b.a,{color:"yellow",fluid:!0,size:"large",children:"Login"})]})}),Object(u.jsxs)(O.a,{children:["New to us? ",Object(u.jsx)("a",{href:"#",children:"Sign Up"})]})]})})}n(146);function k(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Setup Login Page"}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"Read the Login Model, You can change it to fit your needs"}),Object(u.jsx)("li",{children:"Make sure you read the Login Controller, to know how it is setup to find the user!"})]})]})}var S=function(){var e=Object(o.useState)(w.getUser()),t=Object(s.a)(e,2),n=t[0],r=t[1];function a(){r(w.getUser())}return n?Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{path:"/",element:Object(u.jsx)("h1",{children:"This is Home Page!"})}),Object(u.jsx)(i.b,{path:"/login",element:Object(u.jsx)(k,{handleSignUpOrLogin:a})}),Object(u.jsx)(i.b,{path:"/signup",element:Object(u.jsx)(v,{handleSignUpOrLogin:a})})]}):Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{path:"/login",element:Object(u.jsx)(k,{handleSignUpOrLogin:a})}),Object(u.jsx)(i.b,{path:"/signup",element:Object(u.jsx)(v,{handleSignUpOrLogin:a})}),Object(u.jsx)(i.b,{path:"/*",element:Object(u.jsx)(i.a,{to:"/login"})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=n(76);a.a.render(Object(u.jsx)(y.a,{children:Object(u.jsx)(S,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[147,1,2]]]);
//# sourceMappingURL=main.e1c26a48.chunk.js.map